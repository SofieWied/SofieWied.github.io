<!-- PROJECT PAGE -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project</title>
    <link rel="stylesheet" type="text/css" href="index.css">
    
    <!-- Vega-Lite for charts -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>

<body>
    <!-- HEADER -->
    <header>
        <div class="header-left">
            <h1>Charts as Data</h1>
        </div>
        <nav class="header-right">
            <a href="index.html">About</a>
            <a href="portfolio.html">Portfolio</a>
            <a href="project.html" class="active">Project</a>
        </nav>
    </header>

    <!-- MAIN CONTENT -->
    <main>
        <!-- Title Section -->
        <section id="title">
            <h1 class="centered-title">The Silver Squeeze: Can Germany Care for its Retiring Boomers?</h1>
        </section>

        <!-- MOTIVATION -->
        <section id="motivation">
            <p>
                Germany faces a demographic challenge unlike any in its modern history. The baby boomer generation—those born between 1955 and 1969—is now retiring en masse. As this cohort transitions from the workforce into retirement, fundamental questions emerge about Germany's capacity to provide care, maintain pension systems, and sustain economic growth.
            </p>
        </section>

        <!-- CHART 1: GERMANY MAP -->
        <section id="life-expectancy" class="project-section">
            <h2>Living longer, retiring later?</h2>
            <p>[tbd]</p>
  
            
            <div class="chart-container">
                <figure id="project_chart1"></figure>
            </div>
            
            <div class="technical-details">
                <button class="tech-button" onclick="toggleTechnical(this)">Technical Details</button>
                <div class="tech-content">
                    <p>The <a href="https://www-genesis.destatis.de/datenbank/online/statistic/12613/table/12613-0007">average life expectancy</a> (average death age) and <a href="https://www-genesis.destatis.de/datenbank/online/statistic/12621/table/12621-0003/chart/line">life expectancy at 65</a> data were obtained from the GENESIS portal of Destatis. Despite an API being available, manual download was necessary due to inconsistent data structure (male and female data could not be filtered but were instead stacked vertically) requiring manual transformation.</p>
                    <p>The average retirement age data are from the <a href="https://www.demografie-portal.de/DE/Fakten/renteneintrittsalter.html">Demografie Portal</a>, where the data could be directly downloaded.</p>
                    <p id="fn1-ref">The end of pension period was calculated using data on pension receipt duration. To my knowledge, there is no comprehensive, publicly available data source for this metric in Germany. I obtained the data from an analysis conducted by the <a href="https://www.bpb.de/kurz-knapp/zahlen-und-fakten/soziale-situation-in-deutschland/61863/durchschnittliche-rentenbezugsdauer-grv/">BPB</a> (Federal Agency for Civic Education), which is however incomplete, so missing values were imputed.<sup><a href="#fn1">1</a></sup></p>
                    <p>A general issue with the data used throughout this project was the German convention of separating decimals with commas, which I addressed by manually changing values in Excel or programmatically in Python using string replacement functions.</p>
                </div>
            </div>
        </section>

        <!-- CHART 2: DEPENDENCY RATIO -->
        <section id="dependency-ratio" class="project-section">
            <h2>From 6 to 2: The Shrinking Support Base</h2>
            
            <p>
                In 1962, six working Germans supported each pensioner through the statutory pension system. By 2022, this ratio had collapsed to just two workers per retiree. This dramatic shift fundamentally challenges the pay-as-you-go pension model, where current workers fund current retirees.
            </p>
        
            <div class="chart-container">
                <figure id="project_chart2"></figure>
            </div>
            
            <div class="technical-details">
                <button class="tech-button" onclick="toggleTechnical(this)">Technical Details</button>
                <div class="tech-content">
                    <p><strong>Data Source:</strong> [Add source here]</p>
                    <p><strong>Method:</strong> [Explain projection methodology]</p>
                    <p><strong>Tools:</strong> [List tools used]</p>
                </div>
            </div>

        </section>

        <!-- CHART 3: EUROPEAN COMPARISON -->
        <section id="european-comparison" class="project-section">
            <h2>How much does Pension cost the Germans in comparison to EU?</h2>
            
            <p>
                [share of GDP spent on pensions quite stable for germany, while some changes for other countries. overall, germany in upper middle field]
            </p>
            
            <div class="chart-container">
                <figure id="project_chart3"></figure>
            </div>
            
            <div class="technical-details">
                <button class="tech-button" onclick="toggleTechnical(this)">Technical Details</button>
                <div class="tech-content">
                    <p>The data is obtained from Eurostat via their <a href="https://ec.europa.eu/eurostat/web/user-guides/data-browser/api-data-access/api-detailed-guidelines/api-statistics">Statistics API</a>. To modify the API call, one needs to specify the unique table identifier (tps00103), the geographic level of interest (geoLevel=country for individual countries, or aggregate for EU/Europe-wide data), and the years of interest (e.g. time=2012).</p>
                    <p>Before making Charts, the API output requires restructuring. The raw data is converted from Eurostat's nested JSON format into a flat table structure. The preprocessing code can be found in my <a href="https://github.com/SofieWied/SofieWied.github.io/blob/f31bd84ebd57a6d61516d83d92cbfba72f1137eb/project_chart3_eurostat_pension_gdp_API.ipynb">GitHub repository</a>.</p>
                    <p>The EU base map is a GeoJSON file found on GitHub, provided by user <a href="https://github.com/leakyMirror/map-of-europe">leakyMirror</a>. The geographic features are matched to the data using ISO2 country codes via a lookup transform.</p>
                </div>
            </div>
        </section>

        <section id="federal-budget" class="project-section">
            <h2>Federal Budget Analysis</h2>
            
            <p>
                [Dein Text hier über Federal Budget]
            </p>

            <!-- Dropdown für Chart-Auswahl -->
            <div style="margin: 20px 0;">
                <label for="chart4-select" style="font-weight: 500; margin-right: 10px;">View:</label>
                <select id="chart4-select" style="padding: 8px 12px; font-family: 'Montserrat', sans-serif; border: 1px solid #333; border-radius: 4px; background-color: #fff; cursor: pointer;">
                    <option value="budget">Budget Composition</option>
                    <option value="tax">Tax Revenue vs Pension Spending</option>
                </select>
            </div>
            
            <div class="chart-container">
                <figure id="project_chart4"></figure>
            </div>
            
            <div class="technical-details">
                <button class="tech-button" onclick="toggleTechnical(this)">Technical Details</button>
                <div class="tech-content">
                    <p><strong>Data Source:</strong> Bundeshaushalt.de API and Destatis</p>
                    <p><strong>Method:</strong> Interactive visualization with two views</p>
                    <p><strong>Tools:</strong> Vega-Lite with dynamic chart switching</p>
                </div>
            </div>
        </section>



        <!-- CHART 5: Regional Care Capacities -->
        <section id="regional-capacities" class="project-section">
            <h2>title tbd</h2>
            
            <p>
                [regional capacities in old peoples homes, what is the morbidity factor, comparison to AfD map, stationäre Pflege]
            </p>
            
            <div class="chart-container">
                <figure id="project_chart5"></figure>
            </div>
            
            <div class="technical-details">
                <button class="tech-button" onclick="toggleTechnical(this)">Technical Details</button>
                <div class="tech-content">
                    <p>This interactive chart integrates data from multiple official sources. Population data is obtained via the <a href="https://www-genesis.destatis.de/datenbank/online/statistic/12411/table/12411-0018/table-toolbar/search/s/QWx0ZXJzZ3J1cHBlbg%3D%3D">Genesis API</a> from Destatis, Germany's official statistics portal. A detailed explanation of the API implementation and data processing procedures used in both CC9 Chart 1 and this visualization is available in my <a href="https://github.com/SofieWied/SofieWied.github.io/blob/03f465b26f332fc9358f7d784fbab659bbdb8476/cc9_germany_age_map_API.ipynb">GitHub repository</a>. Note: Replicating the API call requires a free Genesis account to obtain a unique personal authentication token.</p>
                    <p>The data on stationary care beds for people aged 65+ and stationary care personnel was retrieved from the German <a href="https://www.regionalstatistik.de/genesis//online?operation=table&code=22411-01-02-4&bypass=true&levelindex=0&levelid=1768151607372#abreadcrumb">Regionalstatistik</a>. While this data is also available through the Genesis API, it is only available at the state level rather than at the district level required for this map. The code for transforming both measures into per 1,000 inhabitants can be found in my <a href="https://github.com/SofieWied/SofieWied.github.io/blob/2f42ffd0df7f2bedd514d3424dd5a7fe049f4637/project_chart5_beds_personnel_per1000_calculation.ipynb">GitHub repository</a>.</p>
                    <p>General Practitioner (GP, German: "Hausarzt") availability and average driving distance to hospitals with emergency care by car data comes from the <a href="https://karten.landatlas.de/">Thünen Atlas</a>, a research institute associated with the German government. While API access is not provided, their data is readily accessible through an interactive visualisation tool for direct download.</p>
                </div>
            </div>
        </section>

        <!-- CHART 6: PROGNOSIS & POSSIBLE SOLUTION -->
        <section id="regional-care" class="project-section">
            <h2>"Pflegenotstand" Quantified: Demand and Supply Scenarios and a possible policy solution? </h2>
            
            <p>
                [Prognose auf Basis von Destatis, taken as given, Pflichtjahr wird häufig als Lösung erwogen,  ]
            </p>
            
            <div class="chart-container">
                <figure id="project_chart6"></figure>
            </div>
            
            <div class="technical-details">
                <button class="tech-button" onclick="toggleTechnical(this)">Technical Details</button>
                <div class="tech-content">
                    <p><strong>Data Source:</strong> [Add source here]</p>
                    <p><strong>Method:</strong> [Explain approach]</p>
                    <p><strong>Tools:</strong> District-level map visualization</p>
                </div>
            </div>
        </section>


        <!-- CONCLUSION -->
        <section id="conclusion" class="project-section">
            <h2>Can Germany Care for Its Retiring Boomers?</h2>
            <p>
                Conclusion tbd: tremendous issue, democratic implications. </p>

        </section>

        <!-- FOOTNOTES -->    
        <hr class="footnote-separator">
        <section id="footnotes">
            <h3>Footnotes</h3>
            <p class="footnote-text" id="fn1">
                [1] The <a href="https://statistik-rente.de/drv/extern/">German Pension Insurance</a> (Deutsche Rentenversicherung) website contains the underlying raw data on individual insurance records. From those one could obtain average pension receipt length values, yet this requires extensive data processing and detailed understanding of the insurance system.
                <a href="#fn1-ref">↩</a>
            </p>
        </section>

    </main>

    <!-- FOOTER -->
    <footer>
        <a href="https://www.linkedin.com/in/sofie-wiedemeyer/">LinkedIn</a> | 
        <a href="https://github.com/SofieWied/SofieWied.github.io">GitHub</a>
        <p>&copy; 2026 Sofie Wiedemeyer</p>
    </footer>

    <!-- JavaScript for embedding all charts -->
    <script>
        // Function to toggle technical details
        function toggleTechnical(button) {
            const content = button.nextElementSibling;
            content.classList.toggle('active');
            
            // Update button text
            if (content.classList.contains('active')) {
                button.textContent = 'Hide Technical Details';
            } else {
                button.textContent = 'Technical Details';
            }
        }

        // Project Chart 1: Germany Map
        let project_spec1 = "project_chart1.json";
        vegaEmbed('#project_chart1', project_spec1);

        // Project Chart 2: Dependency Ratio
        let project_spec2 = "project_chart2.json";
        vegaEmbed('#project_chart2', project_spec2);

        // Project Chart 3: European Comparison
        let project_spec3 = "project_chart3.json";
        vegaEmbed('#project_chart3', project_spec3);

        // Project Chart 5: Regional Care Capacity
        let project_spec5 = "project_chart5.json";
        vegaEmbed('#project_chart5', project_spec5);

        // Project Chart 6: Care Workforce Crisis
        let project_spec6 = "project_chart6.json";
        vegaEmbed('#project_chart6', project_spec6);

        // Project Chart 7: Solutions 
        let project_spec7 = "project_chart7.json";
        vegaEmbed('#project_chart7', project_spec7);


        // Project Chart 4: Federal Budget with Dropdown
        function loadChart4(chartType) {
            const chartSpec = chartType === 'budget' 
                ? 'project_chart4_budget_composition.json'
                : 'project_chart4_tax_vs_pension.json';
            
            vegaEmbed('#project_chart4', chartSpec)
                .then(result => {
                    console.log('Chart loaded:', chartType);
                })
                .catch(error => console.error('Error loading chart:', error));
        }

        // Wait for DOM to be ready, then set up Chart 4
        document.addEventListener('DOMContentLoaded', function() {
            // Load initial chart
            loadChart4('budget');
            
            // Add event listener to dropdown
            const dropdown = document.getElementById('chart4-select');
            if (dropdown) {
                dropdown.addEventListener('change', function(e) {
                    loadChart4(e.target.value);
                });
            }
        });


    </script>
</body>
</html>